

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Experiment Configuration &mdash; UserSimCRS 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />

  
    <link rel="shortcut icon" href="_static/favicon.png"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=d45e8c67"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Evaluation" href="evaluation.html" />
    <link rel="prev" title="User modeling" href="user_modeling.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            UserSimCRS
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="agenda_based.html">Agenda-based simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="llm_based.html">LLM-based simulators</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_modeling.html">User modeling</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Experiment Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#agenda-based-simulation-configuration">Agenda-based simulation configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#supervised-nlu-and-nlg">Supervised NLU and NLG</a></li>
<li class="toctree-l4"><a class="reference internal" href="#llm-based-nlu-and-nlg">LLM-based NLU and NLG</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#llm-based-simulation-configuration">LLM-based simulation configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="evaluation.html">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="autoapi/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">UserSimCRS</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Experiment Configuration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/configuration.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="experiment-configuration">
<h1>Experiment Configuration<a class="headerlink" href="#experiment-configuration" title="Link to this heading"></a></h1>
<p>This page describes how to configure the simulation-based evaluation of a conversational recommender system (CRS).</p>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Link to this heading"></a></h2>
<p>To run the simulation, the following are needed:</p>
<ol class="arabic simple">
<li><p><strong>Domain:</strong> A YAML file with domain-specific slot names that will be used for the preference model.</p></li>
<li><p><strong>Item collection:</strong> A CSV file containing the item collection. This file must contain at least 2 columns labeled <em>ID</em> and <em>NAME</em>.</p></li>
<li><p><strong>Preference data:</strong> A CSV file containing the item ratings in the shape of user ID, item ID, and rating triples.</p></li>
</ol>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<p>The configuration of an experiment is defined in a YAML file (some parameters can also be passed via the command line). The configuration file is divided into three main sections:</p>
<ol class="arabic simple">
<li><p><strong>General parameters</strong>: These parameters define the general settings of the simulation. It includes the following fields:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p><cite>output_name</cite>: Experiment name.</p></li>
<li><p><cite>debug</cite>: A boolean flag to activate debug mode.</p></li>
<li><p><cite>fix_random_seed</cite>: A boolean flag to fix the random seed for reproducibility.</p></li>
<li><p><cite>num_simulated_dialogues</cite>: Number of simulated dialogues to be generated during the experiment.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p><strong>Agent configuration</strong>: Configuration of the agent to be tested in the simulation. It includes the following fields:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p><cite>agent_id</cite>: Agent identifier.</p></li>
<li><p><cite>agent_uri</cite>: URI to communicate with the agent (by default, it is assumed that the agent has an HTTP API).</p></li>
<li><p><cite>agent_class_path</cite>: Import path to the CRS wrapper class. This is used to instantiate the agent in the simulation. More details on CRS wrapper is provided <a class="reference internal" href="crs_wrapper.html"><span class="doc">here</span></a>.</p></li>
<li><p><cite>agent_config</cite> (optional): Dictionary with additional configuration parameters for the agent.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><p><strong>Simulator configuration</strong>: Configuration of the user simulator. It includes at least the following fields:</p></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><p><cite>simulator_id</cite>: User simulator identifier.</p></li>
<li><p><cite>simulator_class_path</cite>: Import path to the user simulator class. This is used to instantiate the user simulator in the simulation.</p></li>
<li><p><cite>domain</cite>: A YAML file with domain-specific slot names.</p></li>
<li><p><cite>items</cite>: Path to items file.</p></li>
<li><p><cite>id_col</cite>: Name of the CSV field containing item id.</p></li>
<li><p><cite>domain_mapping</cite>: CSV field mapping to create item based on domain slots.</p></li>
<li><p><cite>ratings</cite>: Path to ratings file.</p></li>
<li><p><cite>historical_ratings_ratio</cite>: Ratio ([0..1]) of ratings to be used as historical data.</p></li>
</ul>
</div></blockquote>
<p>Note that additional parameters specific to the user simulator should be added in the simulator configuration section. For example, it can be parameters related to the natural language understanding components or related to the large language model used for the simulation. We discuss some of parameters for agenda-based and LLM-based simulators below. In general, the parameters correspond to the ones defined in the specific simulator class.</p>
<section id="agenda-based-simulation-configuration">
<h3>Agenda-based simulation configuration<a class="headerlink" href="#agenda-based-simulation-configuration" title="Link to this heading"></a></h3>
<p>To build an agenda-based user simulator, you need to provide an <strong>interaction model</strong>. It is a YAML file containing the users’ and agent’s intent space, as well as the set of expected agent intents for each user intent, is required for the interaction model. The CIR6 interaction model shipped with library offers a baseline starting point, which may be further tailored according to the behavior and capabilities of the CRS. The path to the interaction model file should be specified in the configuration file under the <cite>intents</cite> parameter.</p>
<p>A default configuration to experiment with the IAI MovieBot, as the conversational agent, and agenda-based user simulator with supervised NLU and NLG is provided in <cite>config/default/config_default.yaml</cite>.</p>
<section id="supervised-nlu-and-nlg">
<h4>Supervised NLU and NLG<a class="headerlink" href="#supervised-nlu-and-nlg" title="Link to this heading"></a></h4>
<p>To use supervised NLU and NLG components in the simulation, you need access to:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Annotated sample dialogues:</strong> A small sample of annotated dialogues with the CRS. The sample size depends on the complexity of the system, in terms of action space and language variety, but is generally in the order of 5-50 dialogues. The sample of dialogues must contain utterance-level annotations in terms of intents and entities, as this is required to train the NLU and NLG components. Note that the slots used for annotation should be the same as the ones defined in the domain file and intents should follow the ones defined in the interaction model.</p></li>
</ul>
</div></blockquote>
<p>Associated configuration parameters are:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>dialogues</cite>: Path to domain config file.</p></li>
<li><p><cite>intent_classifier</cite>: Intent classifier model to be used. Only supports DialogueKit intent classifiers.</p></li>
<li><p><cite>nlg</cite>: NLG type to be used, set to “conditional” for template-based NLG.</p></li>
<li><p><cite>debug</cite>: Flag (boolean) to activate debug mode.</p></li>
</ul>
</div></blockquote>
</section>
<section id="llm-based-nlu-and-nlg">
<h4>LLM-based NLU and NLG<a class="headerlink" href="#llm-based-nlu-and-nlg" title="Link to this heading"></a></h4>
<p>Additional parameters for LLM-based NLU and NLG components are:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>intent_classifier</cite>: Intent classifier set to “llm” for LLM-based dialogue act extraction.</p></li>
<li><p><cite>intent_classifier_config</cite>: Configuration file for <cite>LLMDialogueActsExtractor</cite>.</p></li>
<li><p><cite>nlg</cite>: NLG type set to “llm” for LLM-based NLG.</p>
<ul>
<li><p><cite>nlg_class_path</cite>: Import path to the LLM-based NLG class.</p></li>
<li><p><cite>nlg_args</cite>: Dictionary with additional configuration parameters for the LLM-based NLG class.</p></li>
</ul>
</li>
</ul>
</div></blockquote>
</section>
</section>
<section id="llm-based-simulation-configuration">
<h3>LLM-based simulation configuration<a class="headerlink" href="#llm-based-simulation-configuration" title="Link to this heading"></a></h3>
<p>Additional parameters for the LLM-based user simulators are:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>llm_interface_class_path</cite>: Import path to the LLM interface class. This is used to instantiate the LLM interface in the simulation.</p></li>
<li><p><cite>llm_interface_args</cite>: Dictionary with additional configuration parameters for the LLM interface.</p></li>
<li><p><cite>item_type</cite>: Type of items to be recommended.</p></li>
</ul>
</div></blockquote>
<p>Optional parameters for the LLM-based simulators include:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>task_definition</cite>: Task description to be used in the utterance generation prompt.</p></li>
<li><p><cite>stop_definition</cite> (only for <cite>DualPromptUserSimulator</cite>): Task description to be used in the stop decision prompt.</p></li>
</ul>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="user_modeling.html" class="btn btn-neutral float-left" title="User modeling" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="evaluation.html" class="btn btn-neutral float-right" title="Evaluation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, IAI group, University of Stavanger.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>